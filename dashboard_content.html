<!DOCTYPE html><html lang="ko"><head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quantum Trading Dashboard</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%);
            color: #e2e8f0;
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            font-size: 2.5em;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #4ade80 0%, #22d3ee 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }
        .tabs {
            display: flex;
            gap: 10px;
            margin-bottom: 20px;
        }
        .tab {
            padding: 10px 20px;
            background: rgba(255,255,255,0.1);
            border: none;
            border-radius: 5px;
            color: #94a3b8;
            cursor: pointer;
            transition: all 0.3s;
        }
        .tab.active {
            background: #4ade80;
            color: #000;
        }
        .tab-content {
            display: none;
        }
        .tab-content.active {
            display: block;
        }
        .grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
        }
        .card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 20px;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }
        .card h2 {
            color: #4ade80;
            margin-bottom: 15px;
            font-size: 1.3em;
        }
        .metric {
            display: flex;
            justify-content: space-between;
            margin: 10px 0;
            padding: 8px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 5px;
        }
        .metric-label {
            font-weight: 500;
        }
        .metric-value {
            font-weight: bold;
        }
        .positive { color: #4ade80; }
        .negative { color: #f87171; }
        .neutral { color: #fbbf24; }
        .btn {
            padding: 10px 20px;
            margin: 5px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 1em;
            transition: all 0.3s;
        }
        .btn-primary {
            background: #4ade80;
            color: #000;
        }
        .btn-danger {
            background: #f87171;
            color: #fff;
        }
        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0,0,0,0.3);
        }
        .status-indicator {
            display: inline-block;
            width: 12px;
            height: 12px;
            border-radius: 50%;
            margin-right: 5px;
        }
        .status-running { background: #4ade80; }
        .status-stopped { background: #f87171; }
        .trade-list {
            max-height: 300px;
            overflow-y: auto;
        }
        .trade-item {
            padding: 10px;
            border-bottom: 1px solid rgba(255,255,255,0.1);
            cursor: pointer;
            transition: background 0.3s;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 10px;
            font-size: 0.9em;
        }
        .trade-item:hover {
            background: rgba(255,255,255,0.05);
        }
        .trade-item.buy { border-left: 3px solid #4CAF50; }
        .trade-item.sell { border-left: 3px solid #f44336; }
        .trade-time { color: #94a3b8; }
        .trade-side { font-weight: bold; }
        .trade-side.buy { color: #4CAF50; }
        .trade-side.sell { color: #f44336; }
        .trade-price { color: #f59e0b; }
        .trade-signal { color: #8b5cf6; font-size: 0.85em; }
        .trade-pnl { font-weight: bold; }
        .trade-pnl.positive { color: #4CAF50; }
        .trade-pnl.negative { color: #f44336; }
        .strategy-signals {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }
        .strategy-signal-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 8px;
            background: rgba(255,255,255,0.02);
            border-radius: 4px;
            font-size: 0.9em;
        }
        .strategy-name {
            flex: 1;
            font-weight: 500;
            color: #e2e8f0;
        }
        .signal-raw, .signal-weighted {
            flex: 1;
            text-align: center;
        }
        .signal-raw { color: #94a3b8; }
        .signal-weighted { color: #f59e0b; font-weight: 500; }
        .modal {
            display: none;
            position: fixed;
            z-index: 1000;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.8);
        }
        .modal-content {
            background: #1e293b;
            margin: 10% auto;
            padding: 30px;
            border-radius: 10px;
            width: 80%;
            max-width: 600px;
            border: 1px solid rgba(255,255,255,0.1);
        }
        .close {
            color: #94a3b8;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
        }
        .close:hover {
            color: #fff;
        }
        .setting-item {
            margin: 20px 0;
        }
        .setting-label {
            display: block;
            margin-bottom: 5px;
            font-weight: 500;
        }
        .setting-input {
            width: 100%;
            padding: 10px;
            background: rgba(255,255,255,0.1);
            border: 1px solid rgba(255,255,255,0.2);
            border-radius: 5px;
            color: #fff;
            font-size: 1em;
        }
        .setting-description {
            font-size: 0.9em;
            color: #94a3b8;
            margin-top: 5px;
        }
        .log-content {
            background: #000;
            color: #0f0;
            padding: 15px;
            border-radius: 5px;
            font-family: 'Courier New', monospace;
            font-size: 0.9em;
            max-height: 500px;
            overflow-y: auto;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>üöÄ Quantum Trading Dashboard</h1>
        
        <!-- ÌÉ≠ Î≤ÑÌäº -->
        <div class="tabs">
            <button class="tab active" onclick="switchTab('dashboard', this)">ÎåÄÏãúÎ≥¥Îìú</button>
            <button class="tab" onclick="switchTab('settings', this)">ÏÑ§Ï†ï</button>
            <button class="tab" onclick="switchTab('logs', this)">Î°úÍ∑∏</button>
        </div>
        
        <!-- ÎåÄÏãúÎ≥¥Îìú ÌÉ≠ -->
        <div id="dashboard-tab" class="tab-content active">
            <div class="grid">
                <!-- ÏãúÏä§ÌÖú ÏÉÅÌÉú -->
                <div class="card">
                    <h2>ÏãúÏä§ÌÖú ÏÉÅÌÉú</h2>
                    <div class="metric">
                        <span class="metric-label">ÏÉÅÌÉú</span>
                        <span class="metric-value">
                            <span class="status-indicator status-running" id="status-indicator"></span>
                            <span id="system-status">Running</span>
                        </span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Ïö¥ÏòÅ ÏãúÍ∞Ñ</span>
                        <span class="metric-value" id="uptime">-</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">ÎßàÏßÄÎßâ ÏóÖÎç∞Ïù¥Ìä∏</span>
                        <span class="metric-value" id="last-update">Ïò§Ï†Ñ 9:19:33</span>
                    </div>
                    <div style="margin-top: 15px;">
                        <button class="btn btn-primary" onclick="startTrading()">ÏãúÏûë</button>
                        <button class="btn btn-danger" onclick="stopTrading()">Ï§ëÏßÄ</button>
                    </div>
                </div>
                
                <!-- Í≥ÑÏ¢å Ï†ïÎ≥¥ -->
                <div class="card">
                    <h2>Í≥ÑÏ¢å Ï†ïÎ≥¥</h2>
                    <div class="metric">
                        <span class="metric-label">Ï¥ù ÏûêÏÇ∞</span>
                        <span class="metric-value" id="total-balance">‚Ç©197,316</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">KRW (ÏòàÏàòÍ∏à)</span>
                        <span class="metric-value" id="krw-balance">‚Ç©197,316</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">BTC Î≥¥Ïú†</span>
                        <span class="metric-value" id="btc-balance">0.00000000 BTC</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">BTC ÌèâÍ∞ÄÍ∏à</span>
                        <span class="metric-value" id="position-value">‚Ç©0</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">BTC ÏÜêÏùµ</span>
                        <span class="metric-value" id="btc-pnl">‚Ç©0</span>
                    </div>
                </div>
                
                <!-- Ïò§ÎäòÏùò ÏÑ±Í≥º -->
                <div class="card">
                    <h2>Ïò§ÎäòÏùò ÏÑ±Í≥º</h2>
                    <div class="metric">
                        <span class="metric-label">ÏùºÏùº ÏÜêÏùµ</span>
                        <span class="positive" id="daily-pnl">‚Ç©103,040</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Í±∞Îûò ÌöüÏàò</span>
                        <span class="metric-value">
                            <span id="trade-count">89</span>Ìöå
                            (<span id="buy-count">67</span>Îß§Ïàò/<span id="sell-count">22</span>Îß§ÎèÑ)
                        </span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">ÏäπÎ•†</span>
                        <span class="metric-value" id="win-rate">100.0%</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">ÌèâÍ∑† Ïã†Ìò∏ Í∞ïÎèÑ</span>
                        <span class="metric-value" id="avg-signal">0.131</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">ÌòÑÏû¨ ÏûÑÍ≥ÑÍ∞í</span>
                        <span class="metric-value" id="current-threshold">0.03</span>
                    </div>
                    <div class="metric">
                        <span class="metric-label">Ïò§Îäò ÏµúÍ≥†/ÏµúÏ†ÄÍ∞Ä</span>
                        <span class="metric-value" id="price-range">‚Ç©5,000 ~ ‚Ç©159,749,000</span>
                    </div>
                </div>
                
                <!-- Ï†ÑÎûµÎ≥Ñ Ïã†Ìò∏ Í∞ïÎèÑ -->
                <div class="card">
                    <h2>Ï†ÑÎûµÎ≥Ñ Ïã†Ìò∏ Í∞ïÎèÑ</h2>
                    <div class="strategy-signals" id="strategy-signals">
                        <div class="strategy-signal-item">
                            <span class="strategy-name">Market Making <span id="signal-mm-action" style="font-weight: bold; margin-left: 5px; color: rgb(255, 165, 0);">HOLD</span></span>
                            <span class="signal-raw">ÏõêÎ≥∏: <span id="signal-mm-raw">0.013</span></span>
                            <span class="signal-weighted">Í∞ÄÏ§ëÏπò: <span id="signal-mm-weighted">0.004</span></span>
                        </div>
                        <div class="strategy-signal-item">
                            <span class="strategy-name">Statistical Arbitrage <span id="signal-sa-action" style="font-weight: bold; margin-left: 5px; color: rgb(255, 165, 0);">HOLD</span></span>
                            <span class="signal-raw">ÏõêÎ≥∏: <span id="signal-sa-raw">0.356</span></span>
                            <span class="signal-weighted">Í∞ÄÏ§ëÏπò: <span id="signal-sa-weighted">0.071</span></span>
                        </div>
                        <div class="strategy-signal-item">
                            <span class="strategy-name">Microstructure <span id="signal-ms-action" style="font-weight: bold; margin-left: 5px; color: rgb(255, 165, 0);">HOLD</span></span>
                            <span class="signal-raw">ÏõêÎ≥∏: <span id="signal-ms-raw">0.026</span></span>
                            <span class="signal-weighted">Í∞ÄÏ§ëÏπò: <span id="signal-ms-weighted">0.005</span></span>
                        </div>
                        <div class="strategy-signal-item">
                            <span class="strategy-name">Momentum Scalping <span id="signal-mo-action" style="font-weight: bold; margin-left: 5px; color: rgb(255, 165, 0);">HOLD</span></span>
                            <span class="signal-raw">ÏõêÎ≥∏: <span id="signal-mo-raw">0.000</span></span>
                            <span class="signal-weighted">Í∞ÄÏ§ëÏπò: <span id="signal-mo-weighted">0.000</span></span>
                        </div>
                        <div class="strategy-signal-item">
                            <span class="strategy-name">Mean Reversion <span id="signal-mr-action" style="font-weight: bold; margin-left: 5px; color: rgb(255, 165, 0);">HOLD</span></span>
                            <span class="signal-raw">ÏõêÎ≥∏: <span id="signal-mr-raw">0.036</span></span>
                            <span class="signal-weighted">Í∞ÄÏ§ëÏπò: <span id="signal-mr-weighted">0.005</span></span>
                        </div>
                        <div class="strategy-signal-item" style="margin-top: 10px; padding-top: 10px; border-top: 1px solid rgba(255,255,255,0.2);">
                            <span class="strategy-name"><strong>ÏµúÏ¢Ö Ïã†Ìò∏</strong></span>
                            <span class="signal-raw">BUY: <span id="final-buy-signal">0.000</span></span>
                            <span class="signal-weighted">SELL: <span id="final-sell-signal">0.000</span></span>
                        </div>
                    </div>
                </div>
                
                <!-- ÏµúÍ∑º Í±∞Îûò -->
                <div class="card">
                    <h2>ÏµúÍ∑º Í±∞Îûò</h2>
                    <div class="trade-list" id="recent-trades">
                                    <div class="trade-item sell" onclick="showUpbitTradeDetails({&quot;fee&quot;:12.4942246,&quot;pnl&quot;:10786.024350540845,&quot;price&quot;:159647000,&quot;quantity&quot;:0.00015653,&quot;settlement_amount&quot;:24977.0506854,&quot;side&quot;:&quot;SELL&quot;,&quot;signal_strength&quot;:0.13185296221147141,&quot;timestamp&quot;:&quot;2025-08-24 09:17:46&quot;,&quot;trade_amount&quot;:24989.54491})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 9:17:46</span>
                                        <span class="trade-side sell">SELL</span>
                                        <span class="trade-price">‚Ç©24,977</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.132</span>
                                        <span class="trade-pnl positive">‚Ç©10,786</span>
                                    </div>
                                
                                    <div class="trade-item sell" onclick="showUpbitTradeDetails({&quot;fee&quot;:5.00236711,&quot;pnl&quot;:4477.30480909438,&quot;price&quot;:159675000,&quot;quantity&quot;:0.00006266,&quot;settlement_amount&quot;:10000.23313289,&quot;side&quot;:&quot;SELL&quot;,&quot;signal_strength&quot;:0.10104801113741196,&quot;timestamp&quot;:&quot;2025-08-24 08:56:35&quot;,&quot;trade_amount&quot;:10005.2355})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 8:56:35</span>
                                        <span class="trade-side sell">SELL</span>
                                        <span class="trade-price">‚Ç©10,000</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.101</span>
                                        <span class="trade-pnl positive">‚Ç©4,477</span>
                                    </div>
                                
                                    <div class="trade-item sell" onclick="showUpbitTradeDetails({&quot;fee&quot;:7.49608087,&quot;pnl&quot;:6803.273412389259,&quot;price&quot;:159561000,&quot;quantity&quot;:0.00009397,&quot;settlement_amount&quot;:14986.45108913,&quot;side&quot;:&quot;SELL&quot;,&quot;signal_strength&quot;:0.15138954605165286,&quot;timestamp&quot;:&quot;2025-08-24 08:28:31&quot;,&quot;trade_amount&quot;:14993.94717})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 8:28:31</span>
                                        <span class="trade-side sell">SELL</span>
                                        <span class="trade-price">‚Ç©14,986</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.151</span>
                                        <span class="trade-pnl positive">‚Ç©6,803</span>
                                    </div>
                                
                                    <div class="trade-item buy" onclick="showUpbitTradeDetails({&quot;fee&quot;:2.49947607,&quot;pnl&quot;:0,&quot;price&quot;:5000,&quot;quantity&quot;:0.00003133,&quot;settlement_amount&quot;:2.65612607,&quot;side&quot;:&quot;BUY&quot;,&quot;signal_strength&quot;:0.07500028588101151,&quot;timestamp&quot;:&quot;2025-08-24 08:23:30&quot;,&quot;trade_amount&quot;:2.65612607})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 8:23:30</span>
                                        <span class="trade-side buy">BUY</span>
                                        <span class="trade-price">‚Ç©2</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.075</span>
                                        
                                    </div>
                                
                                    <div class="trade-item buy" onclick="showUpbitTradeDetails({&quot;fee&quot;:2.499523065,&quot;pnl&quot;:0,&quot;price&quot;:5000,&quot;quantity&quot;:0.00003133,&quot;settlement_amount&quot;:2.656173065,&quot;side&quot;:&quot;BUY&quot;,&quot;signal_strength&quot;:0.0321435190916526,&quot;timestamp&quot;:&quot;2025-08-24 08:21:30&quot;,&quot;trade_amount&quot;:2.656173065})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 8:21:30</span>
                                        <span class="trade-side buy">BUY</span>
                                        <span class="trade-price">‚Ç©2</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.032</span>
                                        
                                    </div>
                                
                                    <div class="trade-item buy" onclick="showUpbitTradeDetails({&quot;fee&quot;:2.499242475,&quot;pnl&quot;:0,&quot;price&quot;:5000,&quot;quantity&quot;:0.00003131,&quot;settlement_amount&quot;:2.655792475,&quot;side&quot;:&quot;BUY&quot;,&quot;signal_strength&quot;:0.10215359065302623,&quot;timestamp&quot;:&quot;2025-08-24 08:16:29&quot;,&quot;trade_amount&quot;:2.655792475})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 8:16:29</span>
                                        <span class="trade-side buy">BUY</span>
                                        <span class="trade-price">‚Ç©2</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.102</span>
                                        
                                    </div>
                                
                                    <div class="trade-item sell" onclick="showUpbitTradeDetails({&quot;fee&quot;:9.995698845,&quot;pnl&quot;:8834.737001988333,&quot;price&quot;:159656000,&quot;quantity&quot;:0.00012529,&quot;settlement_amount&quot;:19993.304541154997,&quot;side&quot;:&quot;SELL&quot;,&quot;signal_strength&quot;:0.18301809704821784,&quot;timestamp&quot;:&quot;2025-08-24 08:11:27&quot;,&quot;trade_amount&quot;:20003.300239999997})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 8:11:27</span>
                                        <span class="trade-side sell">SELL</span>
                                        <span class="trade-price">‚Ç©19,993</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.183</span>
                                        <span class="trade-pnl positive">‚Ç©8,834</span>
                                    </div>
                                
                                    <div class="trade-item buy" onclick="showUpbitTradeDetails({&quot;fee&quot;:2.49958656,&quot;pnl&quot;:0,&quot;price&quot;:5000,&quot;quantity&quot;:0.00003132,&quot;settlement_amount&quot;:2.65618656,&quot;side&quot;:&quot;BUY&quot;,&quot;signal_strength&quot;:0.10582638454304219,&quot;timestamp&quot;:&quot;2025-08-24 08:05:26&quot;,&quot;trade_amount&quot;:2.65618656})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 8:05:26</span>
                                        <span class="trade-side buy">BUY</span>
                                        <span class="trade-price">‚Ç©2</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.106</span>
                                        
                                    </div>
                                
                                    <div class="trade-item buy" onclick="showUpbitTradeDetails({&quot;fee&quot;:2.4998207,&quot;pnl&quot;:0,&quot;price&quot;:5000,&quot;quantity&quot;:0.00003133,&quot;settlement_amount&quot;:2.6564707,&quot;side&quot;:&quot;BUY&quot;,&quot;signal_strength&quot;:0.2,&quot;timestamp&quot;:&quot;2025-08-24 07:58:25&quot;,&quot;trade_amount&quot;:2.6564707})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 7:58:25</span>
                                        <span class="trade-side buy">BUY</span>
                                        <span class="trade-price">‚Ç©2</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.200</span>
                                        
                                    </div>
                                
                                    <div class="trade-item buy" onclick="showUpbitTradeDetails({&quot;fee&quot;:2.4995709,&quot;pnl&quot;:0,&quot;price&quot;:5000,&quot;quantity&quot;:0.00003132,&quot;settlement_amount&quot;:2.6561709000000002,&quot;side&quot;:&quot;BUY&quot;,&quot;signal_strength&quot;:0.2,&quot;timestamp&quot;:&quot;2025-08-24 07:56:24&quot;,&quot;trade_amount&quot;:2.6561709000000002})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 7:56:24</span>
                                        <span class="trade-side buy">BUY</span>
                                        <span class="trade-price">‚Ç©2</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.200</span>
                                        
                                    </div>
                                
                                    <div class="trade-item buy" onclick="showUpbitTradeDetails({&quot;fee&quot;:2.49989976,&quot;pnl&quot;:0,&quot;price&quot;:5000,&quot;quantity&quot;:0.00003132,&quot;settlement_amount&quot;:2.65649976,&quot;side&quot;:&quot;BUY&quot;,&quot;signal_strength&quot;:0.12998225877778163,&quot;timestamp&quot;:&quot;2025-08-24 07:40:22&quot;,&quot;trade_amount&quot;:2.65649976})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 7:40:22</span>
                                        <span class="trade-side buy">BUY</span>
                                        <span class="trade-price">‚Ç©2</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.130</span>
                                        
                                    </div>
                                
                                    <div class="trade-item sell" onclick="showUpbitTradeDetails({&quot;fee&quot;:4.999125425,&quot;pnl&quot;:4239.855050746875,&quot;price&quot;:159600000,&quot;quantity&quot;:0.00006265,&quot;settlement_amount&quot;:9993.940874575,&quot;side&quot;:&quot;SELL&quot;,&quot;signal_strength&quot;:0.04643074754925169,&quot;timestamp&quot;:&quot;2025-08-24 07:21:17&quot;,&quot;trade_amount&quot;:9998.94})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 7:21:17</span>
                                        <span class="trade-side sell">SELL</span>
                                        <span class="trade-price">‚Ç©9,993</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.046</span>
                                        <span class="trade-pnl positive">‚Ç©4,239</span>
                                    </div>
                                
                                    <div class="trade-item buy" onclick="showUpbitTradeDetails({&quot;fee&quot;:2.499336,&quot;pnl&quot;:0,&quot;price&quot;:5000,&quot;quantity&quot;:0.00003132,&quot;settlement_amount&quot;:2.655936,&quot;side&quot;:&quot;BUY&quot;,&quot;signal_strength&quot;:0.07500236279167605,&quot;timestamp&quot;:&quot;2025-08-24 07:18:17&quot;,&quot;trade_amount&quot;:2.655936})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 7:18:17</span>
                                        <span class="trade-side buy">BUY</span>
                                        <span class="trade-price">‚Ç©2</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.075</span>
                                        
                                    </div>
                                
                                    <div class="trade-item buy" onclick="showUpbitTradeDetails({&quot;fee&quot;:2.499711045,&quot;pnl&quot;:0,&quot;price&quot;:5000,&quot;quantity&quot;:0.00003133,&quot;settlement_amount&quot;:2.656361045,&quot;side&quot;:&quot;BUY&quot;,&quot;signal_strength&quot;:0.0750001654041797,&quot;timestamp&quot;:&quot;2025-08-24 07:10:14&quot;,&quot;trade_amount&quot;:2.656361045})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 7:10:14</span>
                                        <span class="trade-side buy">BUY</span>
                                        <span class="trade-price">‚Ç©2</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.075</span>
                                        
                                    </div>
                                
                                    <div class="trade-item sell" onclick="showUpbitTradeDetails({&quot;fee&quot;:5.00032834,&quot;pnl&quot;:4147.441722771111,&quot;price&quot;:159551000,&quot;quantity&quot;:0.00006268,&quot;settlement_amount&quot;:9995.65635166,&quot;side&quot;:&quot;SELL&quot;,&quot;signal_strength&quot;:0.14354007219584258,&quot;timestamp&quot;:&quot;2025-08-24 07:09:13&quot;,&quot;trade_amount&quot;:10000.65668})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 7:09:13</span>
                                        <span class="trade-side sell">SELL</span>
                                        <span class="trade-price">‚Ç©9,995</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.144</span>
                                        <span class="trade-pnl positive">‚Ç©4,147</span>
                                    </div>
                                
                                    <div class="trade-item buy" onclick="showUpbitTradeDetails({&quot;fee&quot;:2.49925531,&quot;pnl&quot;:0,&quot;price&quot;:5000,&quot;quantity&quot;:0.00003134,&quot;settlement_amount&quot;:2.65595531,&quot;side&quot;:&quot;BUY&quot;,&quot;signal_strength&quot;:0.07500579513988563,&quot;timestamp&quot;:&quot;2025-08-24 07:05:12&quot;,&quot;trade_amount&quot;:2.65595531})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 7:05:12</span>
                                        <span class="trade-side buy">BUY</span>
                                        <span class="trade-price">‚Ç©2</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.075</span>
                                        
                                    </div>
                                
                                    <div class="trade-item buy" onclick="showUpbitTradeDetails({&quot;fee&quot;:2.49974108,&quot;pnl&quot;:0,&quot;price&quot;:5000,&quot;quantity&quot;:0.00003134,&quot;settlement_amount&quot;:2.65644108,&quot;side&quot;:&quot;BUY&quot;,&quot;signal_strength&quot;:0.13348838982585065,&quot;timestamp&quot;:&quot;2025-08-24 06:59:10&quot;,&quot;trade_amount&quot;:2.65644108})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 6:59:10</span>
                                        <span class="trade-side buy">BUY</span>
                                        <span class="trade-price">‚Ç©2</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.133</span>
                                        
                                    </div>
                                
                                    <div class="trade-item sell" onclick="showUpbitTradeDetails({&quot;fee&quot;:2.50007015,&quot;pnl&quot;:2028.0647816241938,&quot;price&quot;:159599000,&quot;quantity&quot;:0.00003134,&quot;settlement_amount&quot;:4999.33258985,&quot;side&quot;:&quot;SELL&quot;,&quot;signal_strength&quot;:0.2,&quot;timestamp&quot;:&quot;2025-08-24 06:56:09&quot;,&quot;trade_amount&quot;:5001.83266})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 6:56:09</span>
                                        <span class="trade-side sell">SELL</span>
                                        <span class="trade-price">‚Ç©4,999</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.200</span>
                                        <span class="trade-pnl positive">‚Ç©2,028</span>
                                    </div>
                                
                                    <div class="trade-item buy" onclick="showUpbitTradeDetails({&quot;fee&quot;:2.4999918,&quot;pnl&quot;:0,&quot;price&quot;:5000,&quot;quantity&quot;:0.00003134,&quot;settlement_amount&quot;:2.6566918,&quot;side&quot;:&quot;BUY&quot;,&quot;signal_strength&quot;:0.20152892282793552,&quot;timestamp&quot;:&quot;2025-08-24 06:54:08&quot;,&quot;trade_amount&quot;:2.6566918})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 6:54:08</span>
                                        <span class="trade-side buy">BUY</span>
                                        <span class="trade-price">‚Ç©2</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.202</span>
                                        
                                    </div>
                                
                                    <div class="trade-item sell" onclick="showUpbitTradeDetails({&quot;fee&quot;:4.998994635,&quot;pnl&quot;:4001.5642664219104,&quot;price&quot;:159489000,&quot;quantity&quot;:0.00006269,&quot;settlement_amount&quot;:9993.366415365,&quot;side&quot;:&quot;SELL&quot;,&quot;signal_strength&quot;:0.157683021678095,&quot;timestamp&quot;:&quot;2025-08-24 06:50:06&quot;,&quot;trade_amount&quot;:9998.36541})" style="cursor: pointer;">
                                        <span class="trade-time">Ïò§Ï†Ñ 6:50:06</span>
                                        <span class="trade-side sell">SELL</span>
                                        <span class="trade-price">‚Ç©9,993</span>
                                        <span class="trade-signal">Ïã†Ìò∏: 0.158</span>
                                        <span class="trade-pnl positive">‚Ç©4,001</span>
                                    </div>
                                </div>
                </div>
            </div>
        </div>
        
        <!-- ÏÑ§Ï†ï ÌÉ≠ -->
        <div id="settings-tab" class="tab-content">
            <div class="card">
                <h2>Í±∞Îûò ÏÑ§Ï†ï</h2>
                <div class="setting-item">
                    <label class="setting-label">Ïã†Ìò∏ ÏûÑÍ≥ÑÍ∞í (Signal Threshold)</label>
                    <input type="number" id="signal-threshold" class="setting-input" min="0.05" max="0.5" step="0.05" value="0.25" style="">
                    <div class="setting-description">
                        Í±∞Îûò Ïã†Ìò∏ Í∞ïÎèÑ ÏûÑÍ≥ÑÍ∞í (0.05~0.5)<br>
                        ‚Ä¢ 0.05~0.15: Îß§Ïö∞ ÌôúÎ∞úÌïú Í±∞Îûò (Í≥†ÏúÑÌóò)<br>
                        ‚Ä¢ 0.20~0.30: Î≥¥ÌÜµ Í±∞Îûò ÎπàÎèÑ <strong>(Í∂åÏû•)</strong><br>
                        ‚Ä¢ 0.35~0.50: Î≥¥ÏàòÏ†Å Í±∞Îûò (Ï†ÄÏúÑÌóò)
                    </div>
                </div>
                <div class="setting-item">
                    <label class="setting-label">ÏµúÎåÄ Ìè¨ÏßÄÏÖò ÌÅ¨Í∏∞ (Max Position)</label>
                    <input type="number" id="max-position" class="setting-input" min="100000" max="10000000" step="100000" value="1000000" style="">
                    <div class="setting-description">ÏµúÎåÄ Ìè¨ÏßÄÏÖò ÌÅ¨Í∏∞ (Ïõê)</div>
                </div>
                <div class="setting-item">
                    <label class="setting-label">Í±∞Îûò Í∞ÑÍ≤© (Trading Interval)</label>
                    <input type="number" id="trading-interval" class="setting-input" min="30" max="300" step="10" value="60" style="">
                    <div class="setting-description">Í±∞Îûò Ïã†Ìò∏ ÏÉùÏÑ± Í∞ÑÍ≤© (Ï¥à)</div>
                </div>
                <div class="setting-item">
                    <label class="setting-label">ÏùºÏùº ÏÜêÏã§ ÌïúÎèÑ (Daily Loss Limit)</label>
                    <input type="number" id="daily-loss-limit" class="setting-input" min="1" max="10" step="0.5" value="5" style="">
                    <div class="setting-description">ÏùºÏùº ÏµúÎåÄ ÏÜêÏã§ ÌïúÎèÑ (%)</div>
                </div>
                <button class="btn btn-primary" onclick="saveSettings()">ÏÑ§Ï†ï Ï†ÄÏû•</button>
                <button class="btn" onclick="loadSettings()">ÌòÑÏû¨ ÏÑ§Ï†ï Î∂àÎü¨Ïò§Í∏∞</button>
            </div>
            
            <!-- Ï†ÑÎûµÎ≥Ñ Í∞ÄÏ§ëÏπò ÏÑ§Ï†ï -->
            <div class="card" style="margin-top: 20px;">
                <h2>Ï†ÑÎûµÎ≥Ñ Í∞ÄÏ§ëÏπò ÏÑ§Ï†ï</h2>
                <div class="setting-description" style="margin-bottom: 20px;">
                    Ï†ÑÎûµÎ≥Ñ Í∞ÄÏ§ëÏπòÎ•º Ï°∞Ï†àÌïòÏó¨ Ïã†Ìò∏ Í∞ïÎèÑÎ•º Ï†úÏñ¥Ìï©ÎãàÎã§. (Ìï©Í≥Ñ: <span id="weight-total" style="color: rgb(74, 222, 128);">100</span>%)
                </div>
                
                <div class="setting-item">
                    <label class="setting-label">Market Making (ÎßàÏºì Î©îÏù¥ÌÇπ)</label>
                    <input type="number" id="weight-market-making" class="setting-input" min="0" max="100" step="5" value="30" onchange="updateWeightTotal()" style="">
                    <div class="setting-description">Ïä§ÌîÑÎ†àÎìú ÏàòÏùµ Ï†ÑÎûµ (Í∏∞Î≥∏: 30%)</div>
                </div>
                
                <div class="setting-item">
                    <label class="setting-label">Statistical Arbitrage (ÌÜµÍ≥ÑÏ†Å Ï∞®ÏùµÍ±∞Îûò)</label>
                    <input type="number" id="weight-stat-arb" class="setting-input" min="0" max="100" step="5" value="20" onchange="updateWeightTotal()" style="">
                    <div class="setting-description">ÌéòÏñ¥ Ìä∏Î†àÏù¥Îî© Ï†ÑÎûµ (Í∏∞Î≥∏: 20%)</div>
                </div>
                
                <div class="setting-item">
                    <label class="setting-label">Microstructure (ÎßàÏù¥ÌÅ¨Î°úÍµ¨Ï°∞)</label>
                    <input type="number" id="weight-microstructure" class="setting-input" min="0" max="100" step="5" value="20" onchange="updateWeightTotal()" style="">
                    <div class="setting-description">ÏãúÏû• ÎØ∏ÏãúÍµ¨Ï°∞ Î∂ÑÏÑù (Í∏∞Î≥∏: 20%)</div>
                </div>
                
                <div class="setting-item">
                    <label class="setting-label">Momentum Scalping (Î™®Î©òÌÖÄ Ïä§Ï∫òÌïë)</label>
                    <input type="number" id="weight-momentum" class="setting-input" min="0" max="100" step="5" value="15" onchange="updateWeightTotal()" style="">
                    <div class="setting-description">Îã®Í∏∞ Î™®Î©òÌÖÄ Ìè¨Ï∞© (Í∏∞Î≥∏: 15%)</div>
                </div>
                
                <div class="setting-item">
                    <label class="setting-label">Mean Reversion (ÌèâÍ∑† ÌöåÍ∑Ä)</label>
                    <input type="number" id="weight-mean-reversion" class="setting-input" min="0" max="100" step="5" value="15" onchange="updateWeightTotal()" style="">
                    <div class="setting-description">Í≥ºÎß§Ïàò/Í≥ºÎß§ÎèÑ Ìè¨Ï∞© (Í∏∞Î≥∏: 15%)</div>
                </div>
                
                <div class="setting-item" style="margin-top: 15px; padding-top: 15px; border-top: 1px solid rgba(255,255,255,0.1);">
                    <div class="setting-description">
                        <strong>ÌåÅ:</strong> Í∞ÄÏ§ëÏπò Ìï©Í≥ÑÎäî 100%Í∞Ä ÎêòÏñ¥Ïïº Ìï©ÎãàÎã§.<br>
                        ‚Ä¢ Ïã†Ìò∏Í∞Ä ÏïΩÌïòÎã§Î©¥ Ï£ºÏöî Ï†ÑÎûµÏùò Í∞ÄÏ§ëÏπòÎ•º ÎÜíÏù¥ÏÑ∏Ïöî<br>
                        ‚Ä¢ ÌäπÏ†ï Ï†ÑÎûµÏù¥ Ïûò ÏûëÎèôÌïúÎã§Î©¥ Ìï¥Îãπ Í∞ÄÏ§ëÏπòÎ•º Ï¶ùÍ∞ÄÏãúÌÇ§ÏÑ∏Ïöî
                    </div>
                </div>
                
                <button class="btn btn-primary" onclick="saveStrategyWeights()">Í∞ÄÏ§ëÏπò Ï†ÄÏû•</button>
                <button class="btn" onclick="loadStrategyWeights()">ÌòÑÏû¨ Í∞ÄÏ§ëÏπò Î∂àÎü¨Ïò§Í∏∞</button>
            </div>
        </div>
        
        <!-- Î°úÍ∑∏ ÌÉ≠ -->
        <div id="logs-tab" class="tab-content">
            <div class="card">
                <h2>ÏãúÏä§ÌÖú Î°úÍ∑∏</h2>
                <div class="log-content" id="log-content">
                    Loading logs...
                </div>
                <button class="btn" onclick="loadLogs()">Î°úÍ∑∏ ÏÉàÎ°úÍ≥†Ïπ®</button>
            </div>
        </div>
    </div>
    
    <!-- Í±∞Îûò ÏÉÅÏÑ∏ Î™®Îã¨ -->
    <div id="tradeModal" class="modal" style="display: block;">
        <div class="modal-content">
            <span class="close" onclick="closeModal()">√ó</span>
            <h2>Í±∞Îûò ÏÉÅÏÑ∏ Ï†ïÎ≥¥</h2>
            <div id="trade-details">
                <div class="metric">
                    <span class="metric-label">Í±∞Îûò ÏãúÍ∞Ñ:</span>
                    <span class="metric-value">2025. 8. 24. Ïò§Ï†Ñ 8:28:31</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Í±∞Îûò Î∞©Ìñ•:</span>
                    <span class="metric-value" style="color: #f44336; font-weight: bold;">
                        SELL
                    </span>
                </div>
                <div class="metric">
                    <span class="metric-label">Ï≤¥Í≤∞ Í∞ÄÍ≤©:</span>
                    <span class="metric-value">‚Ç©159,561,000</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Ï≤¥Í≤∞ ÏàòÎüâ:</span>
                    <span class="metric-value">0.00009397 BTC</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Í±∞Îûò Í∏àÏï°:</span>
                    <span class="metric-value">‚Ç©14,993</span>
                </div>
                <div class="metric">
                    <span class="metric-label">ÏàòÏàòÎ£å:</span>
                    <span class="metric-value">‚Ç©7</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Ï†ïÏÇ∞ Í∏àÏï°:</span>
                    <span class="metric-value" style="font-weight: bold;">‚Ç©14,986</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Ïã†Ìò∏ Í∞ïÎèÑ:</span>
                    <span class="metric-value">0.151</span>
                </div>
                <div class="metric">
                    <span class="metric-label">ÏÜêÏùµ:</span>
                    <span class="metric-value" style="color: #4CAF50; font-weight: bold;">
                        ‚Ç©6,803
                    </span>
                </div>
            </div>
        </div>
    </div>
    
    <script>
        // ÌÉ≠ Ï†ÑÌôò
        function switchTab(tabName, element) {
            // Î™®Îì† ÌÉ≠ ÎπÑÌôúÏÑ±Ìôî
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.remove('active');
            });
            
            // ÏÑ†ÌÉùÌïú ÌÉ≠ ÌôúÏÑ±Ìôî
            element.classList.add('active');
            document.getElementById(tabName + '-tab').classList.add('active');
            
            // Î°úÍ∑∏ ÌÉ≠Ïù¥Î©¥ Î°úÍ∑∏ Î°úÎìú
            if (tabName === 'logs') {
                loadLogs();
            } else if (tabName === 'settings') {
                loadSettings();
            }
        }
        
        // Î™®Îã¨ Îã´Í∏∞
        function closeModal() {
            document.getElementById('tradeModal').style.display = 'none';
        }
        
        // Í±∞Îûò ÏÉÅÏÑ∏ Î≥¥Í∏∞ (Upbit Í±∞ÎûòÏö©)
        function showUpbitTradeDetails(trade) {
            const modal = document.getElementById('tradeModal');
            const details = document.getElementById('trade-details');
            
            const sideClass = trade.side === 'BUY' ? 'buy' : 'sell';
            const pnlClass = trade.pnl >= 0 ? 'positive' : 'negative';
            
            details.innerHTML = `
                <div class="metric">
                    <span class="metric-label">Í±∞Îûò ÏãúÍ∞Ñ:</span>
                    <span class="metric-value">${new Date(trade.timestamp).toLocaleString('ko-KR', {timeZone: 'Asia/Seoul'})}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Í±∞Îûò Î∞©Ìñ•:</span>
                    <span class="metric-value" style="color: ${trade.side === 'BUY' ? '#4CAF50' : '#f44336'}; font-weight: bold;">
                        ${trade.side}
                    </span>
                </div>
                <div class="metric">
                    <span class="metric-label">Ï≤¥Í≤∞ Í∞ÄÍ≤©:</span>
                    <span class="metric-value">‚Ç©${Math.floor(trade.price || 0).toLocaleString()}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Ï≤¥Í≤∞ ÏàòÎüâ:</span>
                    <span class="metric-value">${(trade.quantity || 0).toFixed(8)} BTC</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Í±∞Îûò Í∏àÏï°:</span>
                    <span class="metric-value">‚Ç©${Math.floor(trade.trade_amount || 0).toLocaleString()}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">ÏàòÏàòÎ£å:</span>
                    <span class="metric-value">‚Ç©${Math.floor(trade.fee || 0).toLocaleString()}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Ï†ïÏÇ∞ Í∏àÏï°:</span>
                    <span class="metric-value" style="font-weight: bold;">‚Ç©${Math.floor(trade.settlement_amount || 0).toLocaleString()}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Ïã†Ìò∏ Í∞ïÎèÑ:</span>
                    <span class="metric-value">${(trade.signal_strength || 0).toFixed(3)}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">ÏÜêÏùµ:</span>
                    <span class="metric-value" style="color: ${trade.pnl >= 0 ? '#4CAF50' : '#f44336'}; font-weight: bold;">
                        ‚Ç©${Math.floor(trade.pnl || 0).toLocaleString()}
                    </span>
                </div>
            `;
            
            modal.style.display = 'block';
        }
        
        // Í±∞Îûò ÏÉÅÏÑ∏ Î≥¥Í∏∞ (Í∏∞Ï°¥ DB Í±∞ÎûòÏö©)
        function showTradeDetails(trade) {
            const modal = document.getElementById('tradeModal');
            const details = document.getElementById('trade-details');
            
            const sideClass = trade.side === 'BUY' ? 'buy' : 'sell';
            const pnlClass = trade.pnl >= 0 ? 'positive' : 'negative';
            
            details.innerHTML = `
                <div class="metric">
                    <span class="metric-label">Í±∞Îûò ÏãúÍ∞Ñ:</span>
                    <span class="metric-value">${new Date(trade.timestamp).toLocaleString('ko-KR', {timeZone: 'Asia/Seoul'})}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Í±∞Îûò Î∞©Ìñ•:</span>
                    <span class="metric-value" style="color: ${trade.side === 'BUY' ? '#4CAF50' : '#f44336'}; font-weight: bold;">
                        ${trade.side || trade.action || 'N/A'}
                    </span>
                </div>
                <div class="metric">
                    <span class="metric-label">Í±∞Îûò Í∞ÄÍ≤©:</span>
                    <span class="metric-value">‚Ç©${Math.floor(trade.price || 0).toLocaleString()}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Í±∞Îûò ÏàòÎüâ:</span>
                    <span class="metric-value">${((trade.quantity || trade.amount || 0) / (trade.price || 1)).toFixed(8)} BTC</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Í±∞Îûò Í∏àÏï°:</span>
                    <span class="metric-value">‚Ç©${Math.floor(trade.quantity || trade.amount || 0).toLocaleString()}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Ï†ÑÎûµ:</span>
                    <span class="metric-value">${trade.strategy || 'ensemble'}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Ïã†Ìò∏ Í∞ïÎèÑ:</span>
                    <span class="metric-value">${(trade.signal_strength || 0).toFixed(3)}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">Í±∞Îûò Í∑ºÍ±∞:</span>
                    <span class="metric-value" style="font-size: 0.9em;">${trade.reason || 'N/A'}</span>
                </div>
                <div class="metric">
                    <span class="metric-label">ÏÜêÏùµ:</span>
                    <span class="metric-value" style="color: ${trade.pnl >= 0 ? '#4CAF50' : '#f44336'}; font-weight: bold;">
                        ‚Ç©${Math.floor(trade.pnl || 0).toLocaleString()}
                    </span>
                </div>
            `;
            
            modal.style.display = 'block';
        }
        
        // ÏÑ§Ï†ï Ï†ÄÏû•
        async function saveSettings() {
            const settings = {
                signal_threshold: parseFloat(document.getElementById('signal-threshold').value),
                max_position: parseInt(document.getElementById('max-position').value),
                trading_interval: parseInt(document.getElementById('trading-interval').value),
                daily_loss_limit: parseFloat(document.getElementById('daily-loss-limit').value)
            };
            
            try {
                const response = await fetch('/api/settings', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(settings)
                });
                
                if (response.ok) {
                    alert('ÏÑ§Ï†ïÏù¥ Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§. ÏãúÏä§ÌÖúÏùÑ Ïû¨ÏãúÏûëÌïòÏÑ∏Ïöî.');
                } else {
                    alert('ÏÑ§Ï†ï Ï†ÄÏû• Ïã§Ìå®');
                }
            } catch (error) {
                alert('Error: ' + error);
            }
        }
        
        // ÏÑ§Ï†ï Î∂àÎü¨Ïò§Í∏∞
        async function loadSettings() {
            try {
                const response = await fetch('/api/settings');
                const settings = await response.json();
                
                document.getElementById('signal-threshold').value = settings.signal_threshold || 0.25;
                document.getElementById('max-position').value = settings.max_position || 1000000;
                document.getElementById('trading-interval').value = settings.trading_interval || 60;
                document.getElementById('daily-loss-limit').value = settings.daily_loss_limit || 5;
            } catch (error) {
                console.error('Error loading settings:', error);
            }
        }
        
        // Í∞ÄÏ§ëÏπò Ìï©Í≥Ñ ÏóÖÎç∞Ïù¥Ìä∏
        function updateWeightTotal() {
            const weights = [
                'weight-market-making',
                'weight-stat-arb', 
                'weight-microstructure',
                'weight-momentum',
                'weight-mean-reversion'
            ];
            
            let total = 0;
            weights.forEach(id => {
                total += parseFloat(document.getElementById(id).value) || 0;
            });
            
            document.getElementById('weight-total').textContent = total;
            
            // Ìï©Í≥ÑÍ∞Ä 100Ïù¥ ÏïÑÎãàÎ©¥ Í≤ΩÍ≥† ÏÉâÏÉÅ
            const totalElement = document.getElementById('weight-total');
            if (Math.abs(total - 100) < 0.01) {
                totalElement.style.color = '#4ade80';
            } else {
                totalElement.style.color = '#f87171';
            }
        }
        
        // Ï†ÑÎûµ Í∞ÄÏ§ëÏπò Ï†ÄÏû•
        async function saveStrategyWeights() {
            const weights = {
                market_making: parseFloat(document.getElementById('weight-market-making').value) / 100,
                stat_arb: parseFloat(document.getElementById('weight-stat-arb').value) / 100,
                microstructure: parseFloat(document.getElementById('weight-microstructure').value) / 100,
                momentum_scalping: parseFloat(document.getElementById('weight-momentum').value) / 100,
                mean_reversion: parseFloat(document.getElementById('weight-mean-reversion').value) / 100
            };
            
            // Ìï©Í≥Ñ Í≤ÄÏ¶ù
            const total = Object.values(weights).reduce((a, b) => a + b, 0);
            if (Math.abs(total - 1.0) > 0.01) {
                alert('Í∞ÄÏ§ëÏπò Ìï©Í≥ÑÎäî 100%Í∞Ä ÎêòÏñ¥Ïïº Ìï©ÎãàÎã§. ÌòÑÏû¨: ' + (total * 100).toFixed(0) + '%');
                return;
            }
            
            try {
                const response = await fetch('/api/strategy-weights', {
                    method: 'POST',
                    headers: {'Content-Type': 'application/json'},
                    body: JSON.stringify(weights)
                });
                
                if (response.ok) {
                    alert('Ï†ÑÎûµ Í∞ÄÏ§ëÏπòÍ∞Ä Ï†ÄÏû•ÎêòÏóàÏäµÎãàÎã§. ÏãúÏä§ÌÖúÏùÑ Ïû¨ÏãúÏûëÌïòÏÑ∏Ïöî.');
                } else {
                    alert('Í∞ÄÏ§ëÏπò Ï†ÄÏû• Ïã§Ìå®');
                }
            } catch (error) {
                alert('Error: ' + error);
            }
        }
        
        // Ï†ÑÎûµ Í∞ÄÏ§ëÏπò Î∂àÎü¨Ïò§Í∏∞
        async function loadStrategyWeights() {
            try {
                const response = await fetch('/api/strategy-weights');
                const weights = await response.json();
                
                document.getElementById('weight-market-making').value = (weights.market_making || 0.30) * 100;
                document.getElementById('weight-stat-arb').value = (weights.stat_arb || 0.20) * 100;
                document.getElementById('weight-microstructure').value = (weights.microstructure || 0.20) * 100;
                document.getElementById('weight-momentum').value = (weights.momentum_scalping || 0.15) * 100;
                document.getElementById('weight-mean-reversion').value = (weights.mean_reversion || 0.15) * 100;
                
                updateWeightTotal();
            } catch (error) {
                console.error('Error loading strategy weights:', error);
            }
        }
        
        // Î°úÍ∑∏ Î°úÎìú
        async function loadLogs() {
            try {
                const response = await fetch('/api/logs');
                const data = await response.json();
                document.getElementById('log-content').innerHTML = 
                    '<pre>' + (data.logs || 'No logs available').replace(/\n/g, '<br>') + '</pre>';
            } catch (error) {
                document.getElementById('log-content').textContent = 'Error loading logs';
            }
        }
        
        // Í±∞Îûò ÏãúÏûë
        async function startTrading() {
            if (confirm('Í±∞ÎûòÎ•º ÏãúÏûëÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                try {
                    const response = await fetch('/api/control', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({action: 'start'})
                    });
                    const data = await response.json();
                    alert(data.message || 'Trading started');
                } catch (error) {
                    alert('Error: ' + error);
                }
            }
        }
        
        // Í±∞Îûò Ï§ëÏßÄ
        async function stopTrading() {
            if (confirm('Ï†ïÎßêÎ°ú Í±∞ÎûòÎ•º Ï§ëÏßÄÌïòÏãúÍ≤†ÏäµÎãàÍπå?')) {
                try {
                    const response = await fetch('/api/control', {
                        method: 'POST',
                        headers: {'Content-Type': 'application/json'},
                        body: JSON.stringify({action: 'stop'})
                    });
                    const data = await response.json();
                    alert(data.message || 'Trading stopped');
                } catch (error) {
                    alert('Error: ' + error);
                }
            }
        }
        
        // ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
        async function updateStatus() {
            try {
                const response = await fetch('/api/status');
                const data = await response.json();
                
                // ÏãúÏä§ÌÖú ÏÉÅÌÉú ÏóÖÎç∞Ïù¥Ìä∏
                document.getElementById('system-status').textContent = data.system_status || 'Unknown';
                document.getElementById('last-update').textContent = new Date().toLocaleTimeString('ko-KR', {timeZone: 'Asia/Seoul'});
                
                // ÏÉÅÌÉú Ïù∏ÎîîÏºÄÏù¥ÌÑ∞
                const indicator = document.getElementById('status-indicator');
                indicator.className = 'status-indicator status-' + 
                    (data.system_status === 'Running' ? 'running' : 'stopped');
                
                // Í≥ÑÏ¢å Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
                document.getElementById('total-balance').textContent = 
                    '‚Ç©' + Math.floor(data.total_balance || 0).toLocaleString();
                document.getElementById('krw-balance').textContent = 
                    '‚Ç©' + Math.floor(data.krw_balance || 0).toLocaleString();
                document.getElementById('btc-balance').textContent = 
                    (data.btc_balance || 0).toFixed(8) + ' BTC';
                document.getElementById('position-value').textContent = 
                    '‚Ç©' + Math.floor(data.position_value || 0).toLocaleString();
                    
                // BTC ÏÜêÏùµ
                if (data.btc_pnl) {
                    const pnlElement = document.getElementById('btc-pnl');
                    pnlElement.textContent = '‚Ç©' + Math.floor(data.btc_pnl).toLocaleString();
                    pnlElement.className = data.btc_pnl >= 0 ? 'positive' : 'negative';
                }
                
                // ÏÑ±Í≥º ÏóÖÎç∞Ïù¥Ìä∏
                const pnlElement = document.getElementById('daily-pnl');
                const pnl = data.daily_pnl || 0;
                pnlElement.textContent = '‚Ç©' + Math.floor(pnl).toLocaleString();
                pnlElement.className = pnl >= 0 ? 'positive' : 'negative';
                
                document.getElementById('trade-count').textContent = data.trade_count || '0';
                document.getElementById('buy-count').textContent = data.buy_count || '0';
                document.getElementById('sell-count').textContent = data.sell_count || '0';
                document.getElementById('win-rate').textContent = 
                    (data.win_rate || 0).toFixed(1) + '%';
                document.getElementById('avg-signal').textContent = 
                    (data.avg_signal_strength || 0).toFixed(3);
                document.getElementById('current-threshold').textContent = 
                    (data.current_threshold || 0.25).toFixed(2);
                
                // Í∞ÄÍ≤© Î≤îÏúÑ ÌëúÏãú
                if (data.min_price && data.max_price) {
                    document.getElementById('price-range').textContent = 
                        `‚Ç©${Math.floor(data.min_price).toLocaleString()} ~ ‚Ç©${Math.floor(data.max_price).toLocaleString()}`;
                }
                
                // ÏµúÍ∑º Í±∞Îûò - Upbit API Îç∞Ïù¥ÌÑ∞ ÏÇ¨Ïö©
                fetch('/api/upbit-trades')
                    .then(response => response.json())
                    .then(tradesData => {
                        if (tradesData.trades && tradesData.trades.length > 0) {
                            const tradesHtml = tradesData.trades.map(trade => {
                                const sideClass = trade.side === 'BUY' ? 'buy' : 'sell';
                                const pnlClass = trade.pnl >= 0 ? 'positive' : 'negative';
                                // Ï†ïÏÇ∞Í∏àÏï° ÌëúÏãú (ÏàòÏàòÎ£å Î∞òÏòÅÎêú Ïã§Ï†ú Í∏àÏï°)
                                const settlementAmount = Math.floor(trade.settlement_amount);
                                return `
                                    <div class="trade-item ${sideClass}" onclick='showUpbitTradeDetails(${JSON.stringify(trade).replace(/'/g, "&apos;")})' style="cursor: pointer;">
                                        <span class="trade-time">${new Date(trade.timestamp).toLocaleTimeString('ko-KR', {timeZone: 'Asia/Seoul'})}</span>
                                        <span class="trade-side ${sideClass}">${trade.side}</span>
                                        <span class="trade-price">‚Ç©${settlementAmount.toLocaleString()}</span>
                                        <span class="trade-signal">Ïã†Ìò∏: ${(trade.signal_strength || 0).toFixed(3)}</span>
                                        ${trade.pnl !== 0 ? `<span class="trade-pnl ${pnlClass}">‚Ç©${Math.floor(trade.pnl).toLocaleString()}</span>` : ''}
                                    </div>
                                `;
                            }).join('');
                            document.getElementById('recent-trades').innerHTML = tradesHtml;
                        } else {
                            document.getElementById('recent-trades').innerHTML = '<div class="trade-item">Í±∞Îûò ÎÇ¥Ïó≠Ïù¥ ÏóÜÏäµÎãàÎã§</div>';
                        }
                    })
                    .catch(error => {
                        console.error('Error fetching trades:', error);
                        document.getElementById('recent-trades').innerHTML = '<div class="trade-item">Í±∞Îûò ÎÇ¥Ïó≠ Î°úÎìú Ïã§Ìå®</div>';
                    });
                
            } catch (error) {
                console.error('Error updating status:', error);
            }
        }
        
        // Ï†ÑÎûµÎ≥Ñ Ïã†Ìò∏ ÏóÖÎç∞Ïù¥Ìä∏ Ìï®Ïàò
        async function updateStrategySignals() {
            try {
                const response = await fetch('/api/strategy-signals');
                const signals = await response.json();
                
                // Market Making
                if (signals.market_making) {
                    document.getElementById('signal-mm-raw').textContent = signals.market_making.raw_signal.toFixed(3);
                    document.getElementById('signal-mm-weighted').textContent = signals.market_making.weighted_signal.toFixed(3);
                    const mmAction = document.getElementById('signal-mm-action');
                    mmAction.textContent = signals.market_making.action || 'HOLD';
                    mmAction.style.color = signals.market_making.action === 'BUY' ? '#00ff00' : 
                                          signals.market_making.action === 'SELL' ? '#ff4444' : '#ffa500';
                }
                
                // Statistical Arbitrage
                if (signals.statistical_arbitrage) {
                    document.getElementById('signal-sa-raw').textContent = signals.statistical_arbitrage.raw_signal.toFixed(3);
                    document.getElementById('signal-sa-weighted').textContent = signals.statistical_arbitrage.weighted_signal.toFixed(3);
                    const saAction = document.getElementById('signal-sa-action');
                    saAction.textContent = signals.statistical_arbitrage.action || 'HOLD';
                    saAction.style.color = signals.statistical_arbitrage.action === 'BUY' ? '#00ff00' : 
                                          signals.statistical_arbitrage.action === 'SELL' ? '#ff4444' : '#ffa500';
                }
                
                // Microstructure
                if (signals.microstructure) {
                    document.getElementById('signal-ms-raw').textContent = signals.microstructure.raw_signal.toFixed(3);
                    document.getElementById('signal-ms-weighted').textContent = signals.microstructure.weighted_signal.toFixed(3);
                    const msAction = document.getElementById('signal-ms-action');
                    msAction.textContent = signals.microstructure.action || 'HOLD';
                    msAction.style.color = signals.microstructure.action === 'BUY' ? '#00ff00' : 
                                          signals.microstructure.action === 'SELL' ? '#ff4444' : '#ffa500';
                }
                
                // Momentum Scalping
                if (signals.momentum_scalping) {
                    document.getElementById('signal-mo-raw').textContent = signals.momentum_scalping.raw_signal.toFixed(3);
                    document.getElementById('signal-mo-weighted').textContent = signals.momentum_scalping.weighted_signal.toFixed(3);
                    const moAction = document.getElementById('signal-mo-action');
                    moAction.textContent = signals.momentum_scalping.action || 'HOLD';
                    moAction.style.color = signals.momentum_scalping.action === 'BUY' ? '#00ff00' : 
                                          signals.momentum_scalping.action === 'SELL' ? '#ff4444' : '#ffa500';
                }
                
                // Mean Reversion
                if (signals.mean_reversion) {
                    document.getElementById('signal-mr-raw').textContent = signals.mean_reversion.raw_signal.toFixed(3);
                    document.getElementById('signal-mr-weighted').textContent = signals.mean_reversion.weighted_signal.toFixed(3);
                    const mrAction = document.getElementById('signal-mr-action');
                    mrAction.textContent = signals.mean_reversion.action || 'HOLD';
                    mrAction.style.color = signals.mean_reversion.action === 'BUY' ? '#00ff00' : 
                                          signals.mean_reversion.action === 'SELL' ? '#ff4444' : '#ffa500';
                }
                
                // ÏµúÏ¢Ö ÏßëÍ≥Ñ Ïã†Ìò∏
                if (signals.aggregate) {
                    const buyScore = signals.aggregate.buy_score;
                    const sellScore = signals.aggregate.sell_score;
                    const action = signals.aggregate.action;
                    
                    document.getElementById('final-buy-signal').textContent = buyScore.toFixed(3);
                    document.getElementById('final-sell-signal').textContent = sellScore.toFixed(3);
                    document.getElementById('final-action').textContent = action;
                    
                    // Ïï°ÏÖòÏóê Îî∞Î•∏ ÏÉâÏÉÅ Î≥ÄÍ≤Ω
                    const actionElement = document.getElementById('final-action');
                    if (action === 'BUY') {
                        actionElement.style.color = '#00ff00';
                    } else if (action === 'SELL') {
                        actionElement.style.color = '#ff4444';
                    } else {
                        actionElement.style.color = '#ffa500';
                    }
                }
                
            } catch (error) {
                console.error('Error updating strategy signals:', error);
            }
        }
        
        // ÌéòÏù¥ÏßÄ Î°úÎìú Ïãú Ï¥àÍ∏∞Ìôî
        window.onload = function() {
            updateStatus();
            loadSettings();
            loadStrategyWeights();
            updateStrategySignals();
            setInterval(updateStatus, 5000);  // 5Ï¥àÎßàÎã§ ÏóÖÎç∞Ïù¥Ìä∏
            setInterval(updateStrategySignals, 5000);  // 5Ï¥àÎßàÎã§ Ïã†Ìò∏ ÏóÖÎç∞Ïù¥Ìä∏
        };
        
        // Î™®Îã¨ Ïô∏Î∂Ä ÌÅ¥Î¶≠ Ïãú Îã´Í∏∞
        window.onclick = function(event) {
            const modal = document.getElementById('tradeModal');
            if (event.target == modal) {
                modal.style.display = 'none';
            }
        }
    </script>

</body></html>